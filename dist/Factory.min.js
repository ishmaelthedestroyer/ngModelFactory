angular.module("Factory",["EventEmitter","Endpoint","Util"]).service("Factory",["$q","Model","Endpoint","EventEmitter","Util",function(a,b,c,d,e){var f=function(a,b){var c={endpoints:{prefix:"",perPage:20,list:{method:"GET",path:""},find:{method:"GET",path:""},create:{method:"POST",path:""},update:{method:"PUT",path:""},del:{method:"DEL",path:""}}};return this.config=e.extend(c,b),this.store={},this.throttle={},this.Model=a,this};return f.prototype._$dump=function(){var a=this,b=[];for(var c in a.store)b.push(a.store[c]);return b},f.prototype._$wrap=function(a){var b=this;if(b.store[a._id])for(var c in a)b.store[a._id][c]=a[c];else b.store[a._id]=new b.Model(a),b._$registerListeners(b.store[a._id]);return b.store[a._id]},f.prototype._$registerListeners=function(){},f.prototype.$create=function(a){var b=this,c=new b.Model(a);return c._$isLocal=!0,b.store[c._id]=c,b._$registerListeners(b.store[c._id]),c},f.prototype._$request=function(a){var b=this;return new c.Request({method:b.config.endpoints[a].method,path:b.config.endpoints[a].path}).execute()},f.prototype.$find=function(b,c){var d=this,e=a.defer();return d._$request("find",b,null,null,c).then(function(a){e.resolve(d._$wrap(a))})["catch"](function(a){e.reject(a)}),e.promise},f.prototype.$findSync=function(){},f.prototype.$list=function(b,c,d){var e=this,f=a.defer();return e._$request("list",null,b,c,d).then(function(a){var b=[];angular.forEach(a,function(a){b.push(e._$wrap(a))}),f.resolve(b)})["catch"](function(a){f.reject(a)}),f.promise},f.prototype.$listSync=function(){},f.prototype.$map=function(){},f.prototype.$mapSync=function(){},f}]);