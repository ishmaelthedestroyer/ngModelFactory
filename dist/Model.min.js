angular.module("ngModelFactory.Model",["EventEmitter","Endpoint","Util"]).service("ngModelFactory.Model",["$log","$q","Endpoint","EventEmitter","ngModelFactory.mixins","Util",function(a,b,c,d,e,f){var g=function(a){if(!(this instanceof g))return new g(a);d.call(this),f.extend(this,e);var b=this;for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b};return f.inherits(g,d),g.prototype.$serialize=function(){var a=this,b={};for(var c in a)a.hasOwnProperty(c)&&"function"!=typeof a[c]&&(b[c]=a[c]);return delete b._$isLocal,delete b._events,b},g.prototype.$update=function(a){var b=this,c={};for(var d in a)a.hasOwnProperty(d)&&(c[d]=angular.copy(b[d]),b[d]=a[d]);return b.emit("$update",b,c),b},g.prototype.$save=function(a){var b=this,c=b._$isLocal?"create":"update",d=f.extend({method:b._$config.endpoints[c].method,path:b._$config.endpoints[c].path,data:b.$serialize(),map:{":id":b._id},ignoreCache:!0,throttle:!1},a),e=b.$request(d);return e.then(function(a){b._$isLocal&&delete b._$isLocal,b.$update(a)}),e},g.prototype.$reload=function(a){var b=this,c="find",d=f.extend({method:b._$config.endpoints[c].method,path:b._$config.endpoints[c].path,map:{":id":b._id},ignoreCache:!0,throttle:!1},a),e=b.$request(d);return e.then(function(a){b.$update(a)}),e},g.prototype.$delete=function(a){var b=this,c="del",d=f.extend({method:b._$config.endpoints[c].method,path:b._$config.endpoints[c].path,map:{":id":b._id},ignoreCache:!0,throttle:!0},a);return b.emit("$delete",b),b.$request(d)},g}]);